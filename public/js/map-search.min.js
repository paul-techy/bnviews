"use strict";function addMarker(e,a){for(var t,s=new google.maps.InfoWindow,o=0;t=a[o];o++){var i=new google.maps.Marker({position:new google.maps.LatLng(t.latitude,t.longitude),icon:void 0!==t.icon?t.icon:void 0,map:e,title:void 0!==t.title?t.title:void 0,content:void 0!==t.content?t.content:void 0});markers.push(i),google.maps.event.addListener(i,"click",(function(a){this.content&&(s.setContent(this.content),s.open(e,this))}))}}function setMapOnAll(e){for(var a=0;a<markers.length;a++)markers[a].setMap(e)}function clearMarkers(){setMapOnAll(null)}function deleteMarkers(){clearMarkers(),markers=[]}function moneyFormat(e,a){return"before"==symbolPosition?e+" "+a:a+" "+e}function getProperties(e,a){if(loadPage){a=a||"";var t=e,s=t.getBounds();if(null!=s)var o=t.getZoom(),i=s.getSouthWest().lat(),l=s.getSouthWest().lng(),r=s.getNorthEast().lat(),n=s.getNorthEast().lng(),c=s.getCenter().lat(),d=s.getCenter().lng(),p=o+"~"+s+"~"+i+"~"+l+"~"+r+"~"+n+"~"+c+"~"+d;else p="";map_loc=s;var m=$("#price-range").attr("data-value");m=m.split(",");var g=$("#front-search-field").val();$("#header-search-form").val(g);var h=m[0],u=m[1];$("#minPrice").html(h),$("#maxPrice").html(u);var v=getCheckedValueArray("amenities"),f=getCheckedValueArray("property_type"),k=getCheckedValueArray("book_type"),_=getCheckedValueArray("space_type"),x=$("#map-search-min-beds").val(),b=$("#map-search-min-bathrooms").val(),w=$("#map-search-min-bedrooms").val(),P=$("#startDate").val(),y=$("#endDate").val(),C=$("#front-search-guests").val(),R=loadPage;"none"!=$("#more_filters").css("display")&&$.ajax({url:R,data:{_token:token,location:g,min_price:h,max_price:u,amenities:v,property_type:f,book_type:k,space_type:_,beds:x,bathrooms:b,bedrooms:w,checkin:P,checkout:y,guest:C,map_details:p},type:"post",dataType:"json",beforeSend:function(){$("#properties_show").html(""),show_loader()},success:function(a){$("#page-total").html(a.total),$("#page-from").html(a.from),$("#page-to").html(a.to),allowRefresh=!1;var t="";if(a.total>0){if(a.current_page>1&&(t+='<li class="page-item"><a class="page-data page-link" href="'+a.prev_page_url+'">Previous</a></li>'),a.current_page)for(var s=1;s<=a.last_page;s++)a.current_page==s?t+='<li class="page-item active"><a  href="'+APP_URL+"/search/result?page="+s+'" class="page-data page-link">'+s+"</a></li>":t+='<li class="page-item"><a  href="'+APP_URL+"/search/result?page="+s+'" class="page-data page-link">'+s+"</a></li>";a.next_page_url&&(t+='<li class="page-item"><a class="page-data page-link" href="'+a.next_page_url+'">Next</a></li>'),$("#pager").html(t),$("#pagination").removeClass("d-none")}else $("#pagination").addClass("d-none");var o=a.data,i=[],l="";for(var r in o)if(o.hasOwnProperty(r)){i[r]={latitude:o[r].property_address.latitude,longitude:o[r].property_address.longitude,title:o[r].name,content:'<a href="'+APP_URL+"/properties/"+o[r].slug+"?checkin="+P+"&checkout="+y+"&guests="+C+'" class="media-cover" target="_blank"><img class="map-property-img" src="'+o[r].cover_photo+'"alt="'+o[r].name+'"></a><div class="map-property-name"><div class="col-xs-12 p-1"><div class="location-title"><h5>'+o[r].name+"</h5></div></div></div>"};var n=o[r].avg_rating,c=0;(1==o[r].reviews_count||o[r].reviews_count>0)&&(c=o[r].reviews_count);var d=moneyFormat(o[r].property_price.default_symbol,o[r].property_price.price),p=o[r].book_mark?"#1dbf73":"",m=$("#listCol").hasClass("col-md-7");if(""!=user_id)var g='<a class="btn btn-sm book_mark_change" data-status="'+o[r].book_mark+'" data-id="'+o[r].id+'" style="color:'+p+'"><span style="font-size: 22px;"><i class="fas fa-heart pl-2"></i></span></a>';else g='<a class="btn btn-sm book_mark_change" data-id="'+o[r].id+'" style="color: #"><span style="font-size: 22px;"><i class="fas fa-heart pl-2"></i></span></a>';l+=0==m?'<div class="col-md-6 col-lg-3 p-2 px-4 mt-4"><div class="card h-100"><div class="grid"><a href="'+APP_URL+"/properties/"+o[r].slug+"?checkin="+P+"&checkout="+y+"&guests="+C+'" target="_blank"><figure class="effect-milo"><img src="'+o[r].cover_photo+'" class="room-image-container200 rounded " alt="'+o[r].name+'"/><figcaption></figcaption></figure></a></div><div class="card-body p-0 pl-1 pr-1"><div class="d-flex"><div><div class="pl-2 pr-1"><a href="'+APP_URL+"/users/show/"+o[r].host_id+'"><img src="'+o[r].users.profile_src+'" class="img-60x60 rounded-circle" alt="profile-image"></a></div></div><div class="p-2 text"><a class="text-color text-color-hover" href="'+APP_URL+"/properties/"+o[r].slug+"?checkin="+P+"&checkout="+y+"&guests="+C+'" target="_blank"><h4 class="text-16 font-weight-700 text">'+o[r].name+'</h4></a><p class="text-13 mt-2 mb-0 text"><i class="fas fa-map-marker-alt"></i> '+o[r].property_address.address_line_1+'</p></div></div><div class="review-0 p-3"><div class="d-flex justify-content-between"><div class="d-flex"><div class="d-flex align-items-center"><span><i class="fa fa-star text-14 secondary-text-color"></i> '+n+" ("+c+")</span></div><div>"+g+'</div></div><div><span class="font-weight-700 text-18">'+d+"</span> /"+nightText+'</div></div></div><div class="card-footer text-muted p-0 border-0"><div class="d-flex bg-white justify-content-between px-2 pt-2 mb-3"><div><ul class="list-inline"><li class="list-inline-item  px-4 border rounded-3 mt-1 bg-light text-dark"><div class="vtooltip"> <i class="fas fa-user-friends"></i> '+o[r].accommodates+'<span class="vtooltiptext text-14">'+o[r].accommodates+guestText+'</span></div></li><li class="list-inline-item px-4 border rounded-3 mt-1 bg-light"><div class="vtooltip"> <i class="fas fa-bed"></i> '+o[r].bedrooms+'<span class="vtooltiptext  text-14">'+o[r].bedrooms+bedroomsText+'</span></div></li><li class="list-inline-item px-4 border rounded-3 mt-1 bg-light"><div class="vtooltip"> <i class="fas fa-bath"></i>  '+o[r].bathrooms+'<span class="vtooltiptext  text-14 p-2">'+o[r].bathrooms+bedroomsText+"</span></div></li></ul></div></div></div></div></div></div>":'<div class="col-sm-6 col-md-12 col-lg-12  p-0 mb-4"><div class=" row  border p-2 rounded-3"><div class="col-lg-5 p-2"><div class="img-event"><a href="'+APP_URL+"/properties/"+o[r].slug+"?checkin="+P+"&checkout="+y+"&guests="+C+'" target="_blank"><img class="room-image-container200 rounded" src="'+o[r].cover_photo+'" alt="'+o[r].name+'"></a></div></div><div class="col-lg-7 p-2"><div class="row justify-content-between"><div class="col-sm-12 pl-0"><a href="'+APP_URL+"/properties/"+o[r].slug+"?checkin="+P+"&checkout="+y+"&guests="+C+'" target="_blank"><p class="mb-0 text-18 text-color font-weight-700 text-color-hover text">'+o[r].name+'</p></a></div></div><p class="text-14 mt-3 text-muted"><i class="fas fa-map-marker-alt"></i> '+o[r].property_address.address_line_1+'</p><div class="review-0 p-3"><div class="d-flex justify-content-between"><div class="d-flex align-items-center"><div class="d-flex"><span><i class="fa fa-star text-14 secondary-text-color"></i> '+n+" ("+c+")</span></div><div>"+g+'</div></div><div><span class="font-weight-700 text-18">'+d+"</span> /"+nightText+'</div></div></div><ul class="list-inline mt-2 pb-3"><li class="list-inline-item border rounded-3 p-1 mt-4 px-3"><p class="text-center mb-0"><i class="fas fa-user-friends text-20 d-none d-sm-inline-block text-muted"></i> '+o[r].accommodates+'<span class=" text-14 font-weight-700">'+guestText+'</span></p></li><li class="list-inline-item  border rounded-3 mt-4 p-1  px-3"><p  class="text-center mb-0" ><i class="fas fa-bed d-none d-sm-inline-block text-20 text-muted"></i> '+o[r].bedrooms+'<span class=" text-14 font-weight-700"> '+bedroomsText+'</span></p></li><li class="list-inline-item  border rounded-3 mt-4 p-1  px-3"><p  class="text-center mb-0"><i class="fas fa-bath text-20  d-none d-sm-inline-block  text-muted"></i> '+o[r].bathrooms+'<span class="text-14 font-weight-700"> '+bathroomsText+"</span></p></li></ul></div></div></div>"}""!=l?$("#properties_show").html(l):$("#properties_show").html(' <div class="text-center justify-content-center w-100 position-center"><img src="'+notFoundImage+'" class="img-fluid not-found" alt="not-found"><h4 class="text-center text-20 font-weight-700">'+noResult+"</h4></div>"),addMarker(e,i)},error:function(e,a){allowRefresh=!1},complete:function(){hide_loader()}})}}function getCheckedValueArray(e){return $('input[name="'+e+'[]"]:checked').map((function(){return this.value})).get().join(",")}$((function(){var e=$("#startDate").val(),a=$("#endDate").val();dateRangeBtn(e,a,null,dateFormat)})),$.fn.slider=null,$("#price-range").on("slideStop",(function(e){var a=$("#price-range").attr("data-value"),t=(a=a.split(","))[0],s=a[1];$("#minPrice").html(t),$("#maxPrice").html(s)})),$("#header-search-form").on("change",(function(){allowRefresh=!0,deleteMarkers(),getProperties($("#map_view").locationpicker("map").map)})),$("#search-pg-checkin").datepicker({minDate:0,onSelect:function(e){var a=$("#search-pg-checkin").datepicker("getDate");a.setDate(a.getDate()+1),$("#search-pg-checkout").datepicker("option","minDate",a),setTimeout((function(){$("#search-pg-checkout").datepicker("show")}),20),allowRefresh=!0,loadPage=loadPage,getProperties($("#map_view").locationpicker("map").map)}}),$("#search-pg-checkout").datepicker({dateFormat:dateFormat,minDate:1,onClose:function(){if($("#checkin").datepicker("getDate")>=$("#header-search-checkout").datepicker("getDate")){var e=$("#search-pg-checkout").datepicker("option","minDate");$("#search-pg-checkout").datepicker("setDate",e)}},onSelect:function(){allowRefresh=!0,loadPage=loadPage,getProperties($("#map_view").locationpicker("map").map)}}),$(document.body).on("click",".page-data",(function(e){e.preventDefault();var a=$(this).attr("href");loadPage=a,allowRefresh=!0,getProperties($("#map_view").locationpicker("map").map,a)})),$("#btnBook, #btnRoom, #btnPrice, .filter-apply").on("click",(function(){allowRefresh=!0,deleteMarkers(),loadPage=loadPage,getProperties($("#map_view").locationpicker("map").map),$(".room_filter").addClass("display-off"),$("#more_filters").show(),$(".dropdown-menu-price").removeClass("show")})),$(document.body).on("click","#map_view",(function(){allowRefresh=!0,loadPage=loadPage,getProperties($("#map_view").locationpicker("map").map)}));var zoom=12;function show_loader(){$("#loader").removeClass("display-off"),$("#pagination").hide()}function hide_loader(){$("#loader").addClass("display-off"),$("#pagination").show()}screen.width<1366?zoom=screen.height<768?10:11:screen.height<768&&(zoom=screen.width<1366?11:10),$("#map_view").locationpicker({location:{latitude:latitude,longitude:longitude},radius:0,zoom:zoom,addressFormat:"",markerVisible:!1,markerInCenter:!1,inputBinding:{latitudeInput:$("#latitude"),longitudeInput:$("#longitude"),locationNameInput:$("#address_line_1")},enableAutocomplete:!0,draggable:!0,onclick:function(e,a,t){1==allowRefresh&&getProperties($(this).locationpicker("map").map)},oninitialized:function(e){$(e).locationpicker("map").location.addressComponents}}),$(".slider-selection").trigger("click"),$("#closeMap").on("click",(function(){$("#listCol").removeClass("col-md-7"),$("#listCol").addClass("col-md-12"),$("#mapCol").addClass("d-none"),$("#showMap").removeClass("d-none"),allowRefresh=!0,loadPage=loadPage,getProperties($("#map_view").locationpicker("map").map)})),$("#showMap").on("click",(function(){$("#listCol").removeClass("col-md-12"),$("#listCol").addClass("col-md-7"),$("#mapCol").removeClass("d-none"),$("#showMap").addClass("d-none"),allowRefresh=!0,loadPage=loadPage,getProperties($("#map_view").locationpicker("map").map)})),$(window).on("load",(function(){allowRefresh=!0,loadPage=loadPage,getProperties($("#map_view").locationpicker("map").map)})),$(document).on("click",".dropdown-menu-price",(function(e){e.stopPropagation()}));